<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Reconocimiento de Voz - Productos</title>
</head>
<body style="text-align:center; font-family: sans-serif">
  <h1>ðŸŽ¤ Di el nombre del producto</h1>
  <p id="label" style="font-size: 20px;"></p>
  <img id="product-img" src="" style="width:200px; display:none; margin-top:20px;" />
  <p id="price" style="font-size: 18px; font-weight: bold;"></p>

  <script src="https://cdn.jsdelivr.net/npm/@teachablemachine/sound@0.8/dist/teachablemachine-sound.min.js"></script>
  <script>
    const URL = "./";

    const productImages = {
      "CASINO FRESA PACK X 6 UNIDADES": {
        img: "CASINO FRESA PACK X 6 UNIDADES.webp",
        price: "S/ 4.50"
      },
      "GLOBO POP FRESA BOLSA X 24 UNIDADES": {
        img: "GLOBO POP FRESA BOLSA X 24 UNIDADES.jpg",
        price: "S/ 8.90"
      },
      "INCA KOLA 600ML PAQUETE X 12 UNIDADES": {
        img: "INCA KOLA 600ML PAQUETE X 12 UNIDADES.webp",
        price: "S/ 22.00"
      },
      "NIK CHICO CHOCOLATE PACK X 6 UNIDADES": {
        img: "NIK CHICO CHOCOLATE PACK X 6 UNIDADES.webp",
        price: "S/ 5.50"
      }
    };

    let recognizer;

    async function init() {
      const checkpointURL = URL + "model.json";
      const metadataURL = URL + "metadata.json";

      recognizer = await tmSound.create(checkpointURL, metadataURL);
      await recognizer.ensureModelLoaded();

      recognizer.listen(result => {
        const label = result.label;
        document.getElementById("label").innerText = `Detectado: ${label}`;
        const img = document.getElementById("product-img");
        const priceTag = document.getElementById("price");

        if (productImages[label]) {
          img.src = productImages[label].img;
          img.style.display = "block";
          priceTag.innerText = `Precio: ${productImages[label].price}`;
        } else {
          img.style.display = "none";
          priceTag.innerText = "";
        }
      }, {
        includeSpectrogram: false,
        probabilityThreshold: 0.65
      });
    }

    init(); // se inicia automÃ¡ticamente
  </script>
</body>
</html>
